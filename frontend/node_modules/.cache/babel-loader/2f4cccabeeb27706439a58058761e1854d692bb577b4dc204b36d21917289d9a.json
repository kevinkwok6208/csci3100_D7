{"ast":null,"code":"// src/services/productService.js\nconst productService = {\n  // Get all products\n  getAllProducts: async () => {\n    const response = await fetch('/api/products', {\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to get products');\n    }\n    return response.json();\n  },\n  // Get all categories\n  getAllCategories: async () => {\n    const response = await fetch('/api/categories', {\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to get categories');\n    }\n    const data = await response.json();\n    return data.categories; // Return just the categories array\n  },\n  // Get product by ID\n  getProductById: async productID => {\n    console.log('Fetching product by productID:', productID); // Debugging\n    const response = await fetch(`/api/products/${productID}`, {\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error('API Error:', errorData); // Debugging\n      throw new Error(errorData.message || 'Failed to get product');\n    }\n    return response.json();\n  },\n  // Add a new product with image upload\n  addProduct: async productData => {\n    const formData = new FormData();\n\n    // Add text fields\n    formData.append('productID', productData.productID);\n    formData.append('productName', productData.productName);\n    formData.append('productDescription', productData.productDescription);\n    formData.append('productPrice', productData.productPrice);\n    formData.append('productStorage', productData.productStorage);\n    formData.append('categoryName', productData.categoryName);\n\n    // Add image files\n    if (productData.productImage && productData.productImage.length > 0) {\n      productData.productImage.forEach(file => {\n        formData.append('productImages', file); // Note: using 'productImages' to match backend\n      });\n    }\n    const response = await fetch('/api/products', {\n      method: 'POST',\n      body: formData,\n      // Don't set Content-Type header - browser will set it with boundary\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to add product');\n    }\n    return response.json();\n  },\n  // Update a product with image upload\n  updateProduct: async (productID, productData) => {\n    const formData = new FormData();\n\n    // Add text fields\n    if (productData.productName) formData.append('productName', productData.productName);\n    if (productData.productDescription) formData.append('productDescription', productData.productDescription);\n    if (productData.productPrice) formData.append('productPrice', productData.productPrice);\n    if (productData.productStorage) formData.append('productStorage', productData.productStorage);\n    if (productData.categoryName) formData.append('categoryName', productData.categoryName);\n\n    // Add image files\n    if (productData.productImage && productData.productImage.length > 0) {\n      productData.productImage.forEach(file => {\n        formData.append('productImages', file); // Note: using 'productImages' to match backend\n      });\n    }\n    const response = await fetch(`/api/products/${productID}`, {\n      method: 'PUT',\n      body: formData,\n      // Don't set Content-Type header\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to update product');\n    }\n    return response.json();\n  },\n  // Update product price\n  updatePrice: async (productID, price) => {\n    const response = await fetch(`/api/products/${productID}/price`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        productPrice: price\n      }),\n      // Changed to match backend field name\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to update price');\n    }\n    return response.json();\n  },\n  // Update product stock\n  updateStorage: async (productID, stock) => {\n    const response = await fetch(`/api/products/${productID}/storage`, {\n      // Changed to match backend route\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        productStorage: stock\n      }),\n      // Changed to match backend field name\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to update stock');\n    }\n    return response.json();\n  },\n  // Delete a product\n  deleteProduct: async productID => {\n    const response = await fetch(`/api/products/${productID}`, {\n      method: 'DELETE',\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to delete product');\n    }\n    return response.json();\n  },\n  //update category\n  updateCategory: async (productID, categoryName) => {\n    const response = await fetch(`/api/products/${productID}/category`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        categoryName\n      }),\n      credentials: 'include'\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to update category');\n    }\n    return response.json();\n  }\n};\nexport default productService;","map":{"version":3,"names":["productService","getAllProducts","response","fetch","credentials","ok","errorData","json","Error","message","getAllCategories","data","categories","getProductById","productID","console","log","error","addProduct","productData","formData","FormData","append","productName","productDescription","productPrice","productStorage","categoryName","productImage","length","forEach","file","method","body","updateProduct","updatePrice","price","headers","JSON","stringify","updateStorage","stock","deleteProduct","updateCategory"],"sources":["/Users/kachonlai/Desktop/uni_proj/CSCI3100_Project_Demo/csci3100_D7/frontend/src/services/productService.js"],"sourcesContent":["// src/services/productService.js\r\nconst productService = {\r\n  // Get all products\r\n  getAllProducts: async () => {\r\n    const response = await fetch('/api/products', {\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to get products');\r\n    }\r\n    \r\n    return response.json();\r\n  },\r\n  \r\n  // Get all categories\r\n  getAllCategories: async () => {\r\n    const response = await fetch('/api/categories', {\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to get categories');\r\n    }\r\n    \r\n    const data = await response.json();\r\n    return data.categories; // Return just the categories array\r\n  },\r\n  \r\n  // Get product by ID\r\n  getProductById: async (productID) => {\r\n    console.log('Fetching product by productID:', productID); // Debugging\r\n    const response = await fetch(`/api/products/${productID}`, {\r\n      credentials: 'include',\r\n    });\r\n  \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      console.error('API Error:', errorData); // Debugging\r\n      throw new Error(errorData.message || 'Failed to get product');\r\n    }\r\n  \r\n    return response.json();\r\n  },\r\n  \r\n  // Add a new product with image upload\r\n  addProduct: async (productData) => {\r\n    const formData = new FormData();\r\n    \r\n    // Add text fields\r\n    formData.append('productID', productData.productID);\r\n    formData.append('productName', productData.productName);\r\n    formData.append('productDescription', productData.productDescription);\r\n    formData.append('productPrice', productData.productPrice);\r\n    formData.append('productStorage', productData.productStorage);\r\n    formData.append('categoryName', productData.categoryName);\r\n    \r\n    // Add image files\r\n    if (productData.productImage && productData.productImage.length > 0) {\r\n      productData.productImage.forEach(file => {\r\n        formData.append('productImages', file); // Note: using 'productImages' to match backend\r\n      });\r\n    }\r\n    \r\n    const response = await fetch('/api/products', {\r\n      method: 'POST',\r\n      body: formData, // Don't set Content-Type header - browser will set it with boundary\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to add product');\r\n    }\r\n    \r\n    return response.json();\r\n  },\r\n  \r\n  // Update a product with image upload\r\n  updateProduct: async (productID, productData) => {\r\n    const formData = new FormData();\r\n    \r\n    // Add text fields\r\n    if (productData.productName) formData.append('productName', productData.productName);\r\n    if (productData.productDescription) formData.append('productDescription', productData.productDescription);\r\n    if (productData.productPrice) formData.append('productPrice', productData.productPrice);\r\n    if (productData.productStorage) formData.append('productStorage', productData.productStorage);\r\n    if (productData.categoryName) formData.append('categoryName', productData.categoryName);\r\n\r\n    // Add image files\r\n    if (productData.productImage && productData.productImage.length > 0) {\r\n      productData.productImage.forEach(file => {\r\n        formData.append('productImages', file); // Note: using 'productImages' to match backend\r\n      });\r\n    }\r\n    \r\n    const response = await fetch(`/api/products/${productID}`, {\r\n      method: 'PUT',\r\n      body: formData, // Don't set Content-Type header\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to update product');\r\n    }\r\n    \r\n    return response.json();\r\n  },\r\n  \r\n  // Update product price\r\n  updatePrice: async (productID, price) => {\r\n    const response = await fetch(`/api/products/${productID}/price`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ productPrice: price }), // Changed to match backend field name\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to update price');\r\n    }\r\n    \r\n    return response.json();\r\n  },\r\n  \r\n  // Update product stock\r\n  updateStorage: async (productID, stock) => {\r\n    const response = await fetch(`/api/products/${productID}/storage`, { // Changed to match backend route\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ productStorage: stock }), // Changed to match backend field name\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to update stock');\r\n    }\r\n    \r\n    return response.json();\r\n  },\r\n  \r\n  // Delete a product\r\n  deleteProduct: async (productID) => {\r\n    const response = await fetch(`/api/products/${productID}`, {\r\n      method: 'DELETE',\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to delete product');\r\n    }\r\n    \r\n    return response.json();\r\n  },\r\n\r\n  //update category\r\n  updateCategory: async (productID, categoryName) => {\r\n    const response = await fetch(`/api/products/${productID}/category`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ categoryName }),\r\n      credentials: 'include'\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to update category');\r\n    }\r\n    \r\n    return response.json();\r\n  }\r\n};\r\n\r\nexport default productService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}